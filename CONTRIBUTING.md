# è´¡çŒ®æŒ‡å—

é¦–å…ˆï¼Œæ„Ÿè°¢æ‚¨å¯¹æœ¬é¡¹ç›®çš„å…³æ³¨å’Œæ”¯æŒï¼æœ¬æ–‡æ¡£å°†æŒ‡å¯¼æ‚¨å¦‚ä½•ä¸º G1 DWAQ ç›²èµ°ä¸Šå°é˜¶é¡¹ç›®åšå‡ºè´¡çŒ®ã€‚

## ç›®å½•

- [è¡Œä¸ºå‡†åˆ™](#è¡Œä¸ºå‡†åˆ™)
- [è´¡çŒ®æ–¹å¼](#è´¡çŒ®æ–¹å¼)
- [æŠ¥å‘ŠBug](#æŠ¥å‘Šbug)
- [åŠŸèƒ½è¯·æ±‚](#åŠŸèƒ½è¯·æ±‚)
- [æäº¤ä»£ç ](#æäº¤ä»£ç )
- [ä»£ç é£æ ¼æŒ‡å—](#ä»£ç é£æ ¼æŒ‡å—)
- [æäº¤ä¿¡æ¯æŒ‡å—](#æäº¤ä¿¡æ¯æŒ‡å—)
- [è®¸å¯è¯](#è®¸å¯è¯)

## è¡Œä¸ºå‡†åˆ™

æœ¬é¡¹ç›®é‡‡ç”¨ã€Šè´¡çŒ®è€…å…¬çº¦ã€‹(Contributor Covenant)ã€‚å‚ä¸æœ¬é¡¹ç›®ï¼Œå³è¡¨ç¤ºæ‚¨åŒæ„éµå®ˆæœ¬å‡†åˆ™ã€‚

è¯·å‹å–„å¯¹å¾…æ‰€æœ‰è´¡çŒ®è€…ã€‚æˆ‘ä»¬è‡´åŠ›äºè¥é€ åŒ…å®¹ã€å°Šé‡å’Œå®‰å…¨çš„ç¤¾åŒºç¯å¢ƒã€‚

## è´¡çŒ®æ–¹å¼

### ç®€å•çš„è´¡çŒ®æ–¹å¼

1. **æ”¹è¿›æ–‡æ¡£** - ä¿®å¤é”™åˆ«å­—ã€è¡¥å……è¯´æ˜ã€æ”¹è¿›ç¤ºä¾‹
2. **æŠ¥å‘ŠBug** - è¯¦ç»†æè¿°é—®é¢˜å’Œå¤ç°æ­¥éª¤
3. **æå‡ºæƒ³æ³•** - åœ¨Discussionsä¸­åˆ†äº«æ‚¨çš„æƒ³æ³•å’Œå»ºè®®
4. **åˆ†äº«ä½¿ç”¨ç»éªŒ** - æäº¤ä½¿ç”¨æ¡ˆä¾‹æˆ–æ”¹è¿›å»ºè®®

### ä»£ç è´¡çŒ®

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

## æŠ¥å‘ŠBug

### æäº¤BugæŠ¥å‘Šå‰

è¯·å…ˆæ£€æŸ¥[Issueåˆ—è¡¨](../../issues)ï¼Œç¡®ä¿é—®é¢˜æœªè¢«æŠ¥å‘Šè¿‡ã€‚

### BugæŠ¥å‘Šåº”åŒ…å«

1. **æ¸…æ™°çš„æ ‡é¢˜å’Œæè¿°**
2. **è¯¦ç»†çš„å¤ç°æ­¥éª¤**
   ```
   1. è¿è¡Œå‘½ä»¤...
   2. æŸ¥çœ‹è¾“å‡º...
   3. å‘ç°é—®é¢˜...
   ```
3. **é¢„æœŸè¡Œä¸º vs å®é™…è¡Œä¸º**
4. **ç¯å¢ƒä¿¡æ¯**
   - æ“ä½œç³»ç»Ÿå’Œç‰ˆæœ¬
   - Pythonç‰ˆæœ¬
   - Isaac Labç‰ˆæœ¬
   - PyTorchç‰ˆæœ¬
   - CUDAç‰ˆæœ¬ï¼ˆå¦‚é€‚ç”¨ï¼‰
5. **é”™è¯¯æ—¥å¿—æˆ–æˆªå›¾**
6. **é¢å¤–ä¸Šä¸‹æ–‡**

## åŠŸèƒ½è¯·æ±‚

### æäº¤åŠŸèƒ½è¯·æ±‚å‰

å…ˆåœ¨[Discussions](../../discussions)ä¸­ä¸ç»´æŠ¤è€…è®¨è®ºæ‚¨çš„æƒ³æ³•ã€‚

### åŠŸèƒ½è¯·æ±‚åº”åŒ…å«

1. **æ¸…æ™°çš„ç”¨ä¾‹æè¿°** - è¿™ä¸ªåŠŸèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ
2. **é¢„æœŸè¡Œä¸º** - åŠŸèƒ½åº”è¯¥å¦‚ä½•å·¥ä½œï¼Ÿ
3. **å¯èƒ½çš„æ›¿ä»£æ–¹æ¡ˆ** - æ˜¯å¦æœ‰å…¶ä»–æ–¹å¼ï¼Ÿ
4. **é¢å¤–ä¸Šä¸‹æ–‡** - ç›¸å…³çš„è®ºæ–‡ã€å‚è€ƒæˆ–èµ„æº

## æäº¤ä»£ç 

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-username/G1DWAQ_Lab.git
cd G1DWAQ_Lab

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
conda create -n dwaq python=3.10
conda activate dwaq

# å®‰è£…å¼€å‘ä¾èµ–
pip install -e TienKung-Lab[dev]
pip install -e unitree_sdk2_python
pip install black isort flake8 pytest

# å®‰è£…é¢„æäº¤é’©å­
pre-commit install
```

### ä»£ç é£æ ¼æŒ‡å—

æœ¬é¡¹ç›®éµå¾ªä»¥ä¸‹ä»£ç é£æ ¼æ ‡å‡†ï¼š

#### Pythonä»£ç è§„èŒƒ

1. **PEP 8** - éµå¾ªPythonå®˜æ–¹ä»£ç é£æ ¼æŒ‡å—
2. **ç±»å‹æ³¨è§£** - ä¸ºå‡½æ•°æ·»åŠ ç±»å‹æç¤ºï¼ˆæ¨èï¼‰
3. **æ–‡æ¡£å­—ç¬¦ä¸²** - ä½¿ç”¨Googleé£æ ¼çš„docstring

#### æ ¼å¼åŒ–å·¥å…·

```bash
# è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç 
black . --line-length 100

# æ’åºå¯¼å…¥
isort .

# æ£€æŸ¥é£æ ¼
flake8 . --max-line-length 100 --extend-ignore E203,W503
```

#### ä»£ç ç¤ºä¾‹

```python
"""ç¤ºä¾‹ï¼šè§„èŒƒçš„Pythonä»£ç """

from typing import List, Dict, Optional
import numpy as np
import torch


def process_observations(
    obs: np.ndarray,
    history_length: int = 1,
    normalize: bool = True
) -> torch.Tensor:
    """å¤„ç†è§‚æµ‹æ•°æ®ã€‚
    
    Args:
        obs: åŸå§‹è§‚æµ‹æ•°ç»„ï¼Œshapeä¸º(batch_size, obs_dim)
        history_length: å†å²é•¿åº¦
        normalize: æ˜¯å¦å½’ä¸€åŒ–
        
    Returns:
        å¤„ç†åçš„è§‚æµ‹å¼ é‡
        
    Example:
        >>> obs = np.random.randn(4096, 96)
        >>> processed = process_observations(obs, history_length=1)
        >>> print(processed.shape)
        torch.Size([4096, 96])
    """
    # å®ç°ä»£ç ...
    pass


class DWAQEnvironment:
    """DWAQç¯å¢ƒå®šä¹‰ã€‚
    
    Attributes:
        num_envs: å¹¶è¡Œç¯å¢ƒæ•°é‡
        obs_dim: è§‚æµ‹ç»´åº¦
    """
    
    def __init__(self, num_envs: int, obs_dim: int = 96):
        """åˆå§‹åŒ–ç¯å¢ƒã€‚
        
        Args:
            num_envs: å¹¶è¡Œç¯å¢ƒæ•°é‡
            obs_dim: è§‚æµ‹ç»´åº¦
        """
        self.num_envs = num_envs
        self.obs_dim = obs_dim
```

#### ç‰ˆæƒå£°æ˜

æ‰€æœ‰æ–°æ–‡ä»¶å¿…é¡»åœ¨æ–‡ä»¶å¤´éƒ¨æ·»åŠ ç‰ˆæƒå£°æ˜ï¼š

```python
# Copyright (c) 2026, The G1 DWAQ Project Developers.
# All rights reserved.
# Licensed under the BSD-3-Clause License.

"""æ¨¡å—ç®€çŸ­æè¿°ã€‚

è¯¦ç»†æè¿°...
"""
```

## æäº¤ä¿¡æ¯æŒ‡å—

æäº¤ä¿¡æ¯åº”æ¸…æ™°ç®€æ´ï¼Œä½¿ç”¨è‹±æ–‡æˆ–ä¸­æ–‡ï¼š

### æ ¼å¼

```
<type>(<scope>): <subject>

<body>

<footer>
```

### Typeç±»å‹

- **feat**: æ–°åŠŸèƒ½
- **fix**: Bugä¿®å¤
- **docs**: æ–‡æ¡£æ›´æ”¹
- **style**: ä»£ç é£æ ¼ä¿®æ”¹ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- **refactor**: ä»£ç é‡æ„
- **perf**: æ€§èƒ½ä¼˜åŒ–
- **test**: æµ‹è¯•æ›´æ”¹
- **chore**: å·¥å…·æˆ–é…ç½®æ›´æ”¹

### ç¤ºä¾‹

```
feat(training): add phase-based gait observation

Add support for phase-based gait observation in DWAQ environment.
This improves turning capability by 42% compared to phase-free version.

- Add gait phase computation in observation space
- Create separate configuration for phase-based version
- Update export script to handle 100-dim observations

Closes #123
Refs #456
```

## Pull RequestæŒ‡å—

### å¼€å¯PRå‰çš„æ£€æŸ¥æ¸…å•

- [ ] ä»£ç éµå¾ªé£æ ¼æŒ‡å—ï¼ˆ`black . && isort . && flake8 .`ï¼‰
- [ ] æ·»åŠ äº†å¿…è¦çš„æµ‹è¯•
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- [ ] æäº¤ä¿¡æ¯æ¸…æ™°
- [ ] æ²¡æœ‰å¢åŠ ä¸å¿…è¦çš„ä¾èµ–
- [ ] åœ¨æœ¬åœ°æˆåŠŸæµ‹è¯•

### PRæè¿°æ¨¡æ¿

```markdown
## æè¿°
ç®€è¦æè¿°æ‚¨çš„æ›´æ”¹ã€‚

## ç›¸å…³Issue
Closes #ï¼ˆIssueå·ï¼‰

## æ›´æ”¹ç±»å‹
- [ ] Bugä¿®å¤
- [ ] æ–°åŠŸèƒ½
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] ä»£ç é‡æ„
- [ ] å…¶ä»–

## æµ‹è¯•è¯´æ˜
- æè¿°æ‚¨å¦‚ä½•æµ‹è¯•è¿™äº›æ›´æ”¹
- æä¾›æµ‹è¯•å‘½ä»¤ç¤ºä¾‹

## æ€§èƒ½å½±å“
- [ ] æ— å½±å“
- [ ] æ€§èƒ½æ”¹è¿›ï¼š...
- [ ] æ€§èƒ½ä¸‹é™ï¼š... ï¼ˆéœ€è¯´æ˜åŸå› ï¼‰

## æ£€æŸ¥æ¸…å•
- [ ] ä»£ç è‡ªå®¡
- [ ] æœ¬åœ°æµ‹è¯•é€šè¿‡
- [ ] æ·»åŠ äº†æµ‹è¯•
- [ ] æ›´æ–°äº†æ–‡æ¡£
- [ ] æ— æ–°çš„warnings
```

## ä»£ç å®¡æŸ¥æµç¨‹

1. è‡³å°‘éœ€è¦1ä¸ªç»´æŠ¤è€…çš„æ‰¹å‡†
2. æ‰€æœ‰CIæ£€æŸ¥å¿…é¡»é€šè¿‡
3. æ²¡æœ‰å†²çªçš„æ›´æ”¹
4. å¦‚æœ‰æ„è§ï¼Œè¯·è¿›è¡Œè®¨è®ºå¹¶æ›´æ–°ä»£ç 

## æµ‹è¯•æŒ‡å—

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_environment.py

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=legged_lab tests/
```

### ç¼–å†™æµ‹è¯•

```python
"""æµ‹è¯•æ¨¡å—ç¤ºä¾‹"""

import pytest
import numpy as np
from legged_lab.envs import DWAQEnvironment


class TestDWAQEnvironment:
    """DWAQç¯å¢ƒæµ‹è¯•ç±»"""
    
    @pytest.fixture
    def env(self):
        """ç¯å¢ƒfixture"""
        return DWAQEnvironment(num_envs=4, obs_dim=96)
    
    def test_initialization(self, env):
        """æµ‹è¯•ç¯å¢ƒåˆå§‹åŒ–"""
        assert env.num_envs == 4
        assert env.obs_dim == 96
    
    def test_reset(self, env):
        """æµ‹è¯•ç¯å¢ƒé‡ç½®"""
        obs = env.reset()
        assert obs.shape == (4, 96)
    
    def test_step(self, env):
        """æµ‹è¯•ç¯å¢ƒæ­¥è¿›"""
        env.reset()
        action = np.random.randn(4, 29)
        obs, reward, done, info = env.step(action)
        assert obs.shape == (4, 96)
        assert reward.shape == (4,)
```

## æ–‡æ¡£è´¡çŒ®

### æ”¹è¿›README

- ä¿®å¤é”™åˆ«å­—å’Œè¯­æ³•
- è¡¥å……ç¼ºå¤±çš„è¯´æ˜
- æ”¹è¿›ç¤ºä¾‹ä»£ç 
- æ›´æ–°è¿‡æ—¶çš„ä¿¡æ¯

### ç¼–å†™æ–°æ–‡æ¡£

æ–°æ–‡æ¡£åº”åŒ…å«ï¼š
1. æ¸…æ™°çš„æ ‡é¢˜
2. ç›®å½•ï¼ˆå¦‚éœ€è¦ï¼‰
3. ä»£ç ç¤ºä¾‹
4. æœ€åçš„è”ç³»æ–¹å¼

## è®¸å¯è¯

é€šè¿‡è´¡çŒ®ä»£ç ï¼Œæ‚¨åŒæ„å°†æ‚¨çš„ä»£ç åœ¨BSD-3-Clause Licenseä¸‹å‘å¸ƒã€‚

## é—®é¢˜åé¦ˆ

- ğŸ› **BugæŠ¥å‘Š**: ä½¿ç”¨Issueï¼Œå¸¦ä¸Šè¯¦ç»†å¤ç°æ­¥éª¤
- ğŸ’¡ **åŠŸèƒ½å»ºè®®**: åœ¨Discussionsä¸­è®¨è®º
- ğŸ“š **æ–‡æ¡£é—®é¢˜**: ç›´æ¥æäº¤PR
- â“ **ä½¿ç”¨é—®é¢˜**: åœ¨Discussionsæˆ–Issueä¸­æé—®

## é¢å¤–èµ„æº

- [é¡¹ç›®ä¸»README](./README.md)
- [è®¸å¯è¯](./LICENSE)
- [é¡¹ç›®è¯„å®¡æŠ¥å‘Š](./PROJECT_REVIEW.md)
- [Isaac Labæ–‡æ¡£](https://isaac-sim.github.io/IsaacLab/)
- [Legged Labé¡¹ç›®](https://github.com/Hellod035/LeggedLab)

---

**æ„Ÿè°¢æ‚¨çš„è´¡çŒ®ï¼** ğŸ‰

å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨Issuesæˆ–Discussionsä¸­æå‡ºã€‚
